== v2.4 -> v2.5 ==
2013-06-07

Général:
- bugs
- améliorations
  - la duplication d'utilisateur récupère également les permissions et les éléments de billetterie de l'utilisateur d'origine
  - lorsqu'un usager n'a pas les droits suffisants pour modifier un utilisateur du système, un message explicite lui est dorénavant présenté
  - dans les champs input "autocomplete", lorsqu'on met à zéro la valeur de l'autocomplete, l'id sauvegardée est également remise à zéro (à condition d'inclure le javascript prévu à cet effet)
  - reconstruction des graphes illustrant le schéma des données
- nouveautés
  - possibilité de lier un Contact à un utilisateur, afin d'utiliser les informations personnelles au besoin
  - ajout de données-type dans les fixtures
  - script de migration de la v2.4 à la v2.5 dans le répertoire bin/
  - ajout de permissions (via le script de migration)

RP:
- bugs
  - gestion des codepostaux des organismes dans la recherche
  - des professionnels étaient ajoutés automatiquement à des groupes même lorsque les critères ne concernaient que leurs contacts
  - les billets annulés ne sont plus pris en compte dans les filtres des contacts
  - correction d'une mauvaise condition liée aux cartes d'abo dans le paramétrage des modules
  - retour de la pagination dans la recherche rapide
- améliorations
  - renforcement du contrôle des URL dans les fiches organisme
  - retrait à plusieurs endroits de l'administration des RP du bouton "voir" là ce n'est vraiment pas utile
  - limitation de l'affichage de la liste des groupes aux groupes personnels et communs (selon droits)
  - retrait des données professionnelles si l'utilisateur n'a que les droits sur les organismes OU sur les contacts (l'organisation par défaut des droits regroupe les deux permissions), uniquement dans le design TDP
  - idem dans la liste des organismes / contacts : les colonnes liées à l'autre module ne sont pas affichées si l'utilisateur courant n'a pas les droits sur l'autre module
  - possibilité de retrait de filtres inutiles dans les contacts (via un paramètre de configuration ; contrôles et cartes d'abo.)
  - améliorations diverses et nombreuses du design TDP (list-scrolling, liste des organismes, ...)
  - amélioration notoire de l'affichage de l'historique en billetterie des contacts
  - dorénavant la limitation du nombre de destinataires possibles lors de l'envoi d'un emailing a été réglée ; en contre-partie, on ne peut ajouter qu'une seule fois des Contacts, Organisms ou Professionals
  - optimisation de la gestion des très gros groupes
  - très grosse amélioration du filtre des contacts concernant sur le montant dépensé en billetterie
  - prise en compte des dates de naissance et des relations entre contacts lors d'une fusion de contacts
  - les filtres et autres recherches rapides fonctionnent beaucoup mieux avec des accents
- nouveautés
  - ajout en plus de chaque adresse email d'un champ "pas de newsletter", et prise en compte de ce champ lors de l'envoi d'un emailing
  - possibilité d'extraire les groupes dont les contacts, les professionels et les organismes font partie, dans l'extraction des contacts
  - possibilité d'ajouter un pictogramme aux groupes, et de demander à les voir afficher de manière transversale dans e-venement, dès que le contact est lui-même affiché
  - les "années de naissance" ont été totalement revisitées pour permettre d'enregistrer des dates de naissance complètes ansi qu'un prénom.
  - possibilité de lier un utilisateur système à un contact (mais pas d'incidence sur les fiches contact) (cf. Général)
  - possibilité de lier les contacts entre eux (et éventuellement début de réseau social)

Événementiel:
- bugs:
  - correction de l'agorithme permettant de retrouver les infos des billets d'une manifestation (class Manifestation)
- améliorations:
  - uniformisation de la présentation de la liste des espaces de travail des utilisateurs avec les autres données du même ordre
  - possibilité d'activer/désactiver la présentation des jauges sous forme graphique dans la liste des événements, et ajout du total des jauges en chiffres bien visibles au bout des mini-jauges graphiques
  - ordonnancement des tarifs par prix décroissant dans les manifestations
  - possibilité d'exporter également les contact ayant des billets demandés d'une manifestation
  - consolidation de la gestion de la date et heure d'impression d'un billet, pour éviter les bugs "dommages collatéraux"
- nouveautés:
  - ajout d'une tâche symfony pour synchroniser avec un outil externe le calendrier des prochains événements

Billetterie:
- bugs:
  - correction d'un conflit jQuery dans l'intégration des paiements des ventes partenaires
  - correction marginales diverses
  - correction d'un bug sur la fonctionnalité permettant de réserver un même lot de billet pour toutes les manifestations d'une opération de billetterie
  - retrait des logs de WARNINGs PHP non bloquants
  - correction d'un bug bloquant sur l'affichage des tarifs, relatif à un cas particulier sur les permissions des utilisateurs
  - ajout d'un script (répertoire bin/) permettant d'aller mettre à jour les données qui pourraient encore être mauvaises suite à de vieux bugs de la v2.1 / v2.2
  - corrections de bugs marginaux mais non négligeables dans les calculs du journal détaillé / bordereau de manifestation
- améliorations:
  - des traductions en plus
  - optimisations de code
  - du module de paramétrage des tarifs
  - gestion de la jauge sélectionnée lors de la modification d'une quantité directement dans la liste des billets
  - les événements cachés par défaut le sont toujours lors d'une recherche spécifique, sauf si on décide explicitement de les montrer
  - ajout des paiements relatifs aux annulations dans les opérations de billetterie
  - dans le journal d'un billet, ajout du contact lié à son opération
  - séparation stricte entre la date de dernière mise à jour d'un billet et sa date d'impression, évitera un nombre important de bugs critiques par la suite
  - possibilité d'ajouter automatiquement la mention SPECIMEN sur des billets, afin d'avoir une instance e-venement de test conforme aux engagements de l'éditeur face au CGI français

Scolaires et groupes:
- bugs:
  - multiple but minor bug corrections, code improvement, translations, make'ups...

Vente en ligne:
- bugs:
  - correction d'un bug dans l'enregistrement des données bancaires en base de données lors du fonctionnement avec Paybox
- améliorations:
  - retrait de l'affichage des manifestations qui ne sont pas "affichées par défaut"
- nouveautés:
  - possibilité de faire des commandes à 0€, donc court-circuitant le mécanisme de paiement sécurisé

Stats:
- bugs:
  - les statistiques d'activité en billetterie gardent l'attention uniquement sur les billets originaux, et non les duplicatas comme avant
- améliorations:
  - cartes d'abo: ajout d'un texte explicatif sous le graphe
- nouveautés:
  - passage en version 2 de Open Flash Charts, réécriture du plugin stOfcPlugin en liOfcPlugin
  - nouveau module permettant de connaître des chiffres de base, tel que ça existait avec la v1


== v2.3 -> v2.4 ==

Général:
- bugs
  - corrections mineures dans le datepicker en français pour éviter des warnings JS
  - correction de bugs dans le behaviour Doctrine "Sluggable" lors de l'utilisation d'héritages un peu complexes, empêchant parfois la mise à jour ou la création d'éléments
- améliorations
  - migration de jQuery 1.4 vers 1.9
  - transfert des données génériques (transliteration, charsets...) de ProjectConfiguration::DATA vers e-venement.yml (donc accessible maintenant à travers sfConfig::get('DATA'))
  - déplacement du modèle Traceable du package tck vers generic
  - ajout de données génériques à importer directement via "./symfony doctrine:data --append data/fixtures/..."
  - passage des charsets et des informations de transliteration vers la configuration générale (config/e-venement.yml)
- nouveautés
  - navigation dans le menu par le clavier
  - nouveau menu "comptabilité" réduisant le menu "billetterie"
  - ajout dans toutes les applications où cela était nécessaire d'un error404
  - retrait des fieldsets non utilisés dans les modules admin-generated utilisant le thème jroller
  - ajout d'un script de migration pour passer de la v2.3 à la v2.4
  - ajout de manuels dans le répertoire doc/

RP:
- bugs
  - retrait des groupes appartenant à d'autres personnes de la liste des groupes des contacts
  - correcting d'un bug d'interface sur le remplacement automatique des villes lors de la présence de plusieurs villes dans la liste correpondant au codepostal saisi
  - correction d'un bug qui empêchait l'édition des organismes dans certaines conditions
  - correction de divers bugs liés à / révélés par l'arrivée du design TDP
  - lors d'une recherche rapide sur les contacts et les organismes
- améliorations
  - la sélection du code postal et de la ville ont été revus et complétés
  - optimisations mineures dans le modèle
  - dans les données, amélioration des codes postaux / ville pour Paris (retrait de Paris *XXè arrondissement*, inutile)
  - ajout d'options dans le fichier rp/config/app.yml.template
  - réécriture des actions groupées dans les organismes pour être plus dans les normes de symfony
  - amélioration de l'affichage de l'historique de billetterie dans les contacts
  - amélioration de l'activation de l'ajout de pièces jointes dans les emailings
  - les recherches (via les filtres) sur les noms et prénoms (organismes et contacts) démarrent obligatoirement au début des champs (XXX*, contre *XXX* avant)
- nouveautés
  - finition du design TDP, dont l'utilisation devrait être peu à peu généralisée (usage de tdp.yml.template pour permettre la personnalisation)
  - ajout d'informations sociales (à destination des centres sociaux) (et droits associés)
  - ajout d'une propriété "pas de newsletter" en face de chaque email (pro, perso, organismes)
  - lors de la création d'emailings la liste de organismes filtrés est également ajoutée automatiquement
  - possibilité de créer un emailing directement depuis la liste des organismes
  - les filtres des organismes et des contacts sont partiellement partagés pour pouvoir passer d'une liste à l'autre de manière plus efficace lors de recherches
  - possibilité de fusionner des organismes, et de filtrer les doublons

Événementiel:
- bugs
  - correction d'un bug concernant la mise à jour trop d'une manifestation, alors que le formulaire des prix était encore en attente de validation, ce qui faisait perdre les dernières modifications concernant les prix
  - correction d'un bug complexe concernant la durée des manifestations/événements en relation avec l'héritage du modèle Traceable
- améliorations
  - amélioration de la gestion de la TVA entre catégorie d'événement et manifestation, ainsi que générisation des taux de TVA pour plus de fiabilité
  - ordonnancement des prix dans la fiche manifestation
  - optimisation de widgets (type select) pour de grandes quantités de manifestations
  - historisation des manifestations et des événements
- nouveautés
  - utilisation de fullcalendar pour l'affichage des calendriers de manifestation, permettant des modifications à la volée et beaucoup plus ergonomique
  - possibilité de rendre des manifestations dépendantes, utile pour simplifier le processus de billetterie dans des cas particuliers
  - possibilité de cacher des événements par défaut dans la liste des manifestations en billetterie
  - affichage graphique des jauges dans la liste des événements

Billetterie:
- bugs
  - corrections nombreuses dans les annulations
  - des billets disparaîssaient sans raison (c'était lié à la fois à du JS et du PHP)
  - prise en charge des espaces et des caractères spéciaux dans les tarifs des billets (pour le process de billetterie)
  - correction d'un bug dans le calcul de certaines parties du journal détaillé (avec des billets dupliqués et annulés)
  - correction de l'affichage des contacts dans la micro-fiche d'une opération de billetterie lors de l'utilisation du design TDP
- améliorations
  - de l'affichage du nom des manifestations/événement dans le process de billetterie
  - de la vérification de la présence d'un contact dans une opération quand l'option force_contact est en place
  - des messages d'avertissement
  - de l'i18n
  - du calcul de l'affichage graphique des billets (essentiellement pour les billets de manifestations dépendantes)
  - ajout des date et heure de fin des manifestations dans le processus de billetterie
  - ajout de partials et paramètres de config (dans le app.yml) pour les bons de commande / factures pour l'ajout d'informations complémentaires, en plus du traditionnel et déjà existant "invoice_footer" par exemple
  - les critères de filtre des journaux comptables sont maintenant gérés comme dans les autres modules (en session) pour une continuité plus forte
  - gestion plus générique et plus fiable de la TVA dans les manifestations et les billets
  - ajout des points de contrôle passés dans le journal des billets
  - revisite du calcul du livre des ventes lors de l'affichage des "billets encore non imprimés"
  - les dettes affichent maintenant les numéros de factures
  - il est maintenant possible de rechercher des factures via son identifiant
- nouveautés
  - premières briques de la nouvelle interface de billetterie (pour la 2.5)
  - possibilité de rendre une manifestation dépendante d'une autre, et ainsi lorsqu'un ticket est sélectionné pour cette manifestation, un ticket similaire est ajouté pour sa manifestation dépendante
  - possibilité d'extraction des livres des ventes et de caisse (format CSV + format Sigma Lineal)
  - introduction d'un système de description des fichiers complexes en texte brut
  - affichage des paiements des opérations liées (dont annulations) dans les opérations générales

Vente en ligne:
- améliorations:
  - ajout des dépendances entre manifestations pour le module (pub) de vente en ligne direct
- nouveautés
  - possibilité d'associer automatiquement à un ou des groupes les contacts créés par la vente en ligne (via e-voucher par exemple)

== v2.2 -> v2.3 ==

Carte d'abonnement:
- améliorations
  - amélioration de la structure des données pour éviter les redondances d'informations
  - amélioration du calcul de la date d'expiration lors d'un choix d'une date fixe
  - il est désormais possible de restreindre un utilisateur sur le type de cartes d'abo qu'il peut vendre
- nouveautés
  - création de la notion de type de carte d'abonnement, pour éviter le paramétrage "en dur"
  - ajout d'un module de vérification par codebare / numéro de carte de la validité de ces dernières
  - possibilité d'extraction vers un tableur (MSExcel / Libre Office)

Billetterie:
- bugs
  - correction de bugs dans les calculs de valeurs liées aux billets
  - correction des arrondis dans les montants de TVA, afin que le total soit la somme stricte des arrondis, et non la somme des valeurs réelles
  - correction d'un bug empêchant l'annulation d'un bon de commande (réservation) lors de la réouverture d'une opération
  - importantes améliorations dans les processus d'annulation de billets
- améliorations
  - amélioration de l'impression des livres comptables
  - amélioration de l'interface de contrôle des billets par code barre
  - meilleur support des billets nombreux dans une ligne d'une opération
  - migration de l'information de duplication du billet originel vers le billet duplicata, évitant ainsi des erreurs sur les dates de valeur des billets
  - amélioration du support des billets intégrés dans les opérations de billetterie
- nouveautés
  - ajout d'un système de calcul des dettes
  - possibilité de cacher (via CSS) la liste des paiements sur les factures
  - retrait des dates des critères du journal détaillé dès qu'une manifestation est sélectionnée

Événementiel:
- bugs
  - correction de bugs dans les déséquilibres comptables des manifestations
- améliorations
  - le paramètre "count_demands" qui était présent dans le fichier apps/event/config/app.yml est désormais déterminé dans config/project.yml

RP:
- bugs
  - correction d'un bug sur la pagination des duplicatas
  - correction d'un bug majeur sur l'ajout de pièces jointes dans les emails (les destinataires disparaîssaient)
- améliorations
  - amélioration du support des groupes d'organismes
  - amélioration du support des contacts professionnels dans les groupes
  - amélioration de l'extraction vers tableur des contacts professionels lorsque l'on "préfère les données professionnelles"
- nouveautés
  - un contact peut maintenant être noté comme "caché" par le système (pour la vente en ligne, afin de créer le contact sans le montrer jusqu'à ce que son paiement soit une preuve de validité)
  - ajout de l'affichage des régions (dépendant du code postal) françaises dans les contacts
  - introduction d'une nouvelle génération d'interface (nommée "TDP"), encore en cours de développement (pour tests uniquement)

Vente en ligne:
- nouveautés
  - ajout d'un module de vente en ligne directe (sans passer par e-voucher), afin de pouvoir utiliser les cartes d'abonnement en particulier. le module peut être désactivé par une option dans le fichier config/pub/config/app.yml
  - amélioration du contrôle de la casse pour les contacts créés en ligne

Statistiques:
- nouveautés
 - ajout d'un module permettant de suivre la progression des créances spectateurs

Général:
- bugs
  - correction d'un bug suite à la mise à jour de Swift_Mailer, concernant les envois d'emails en nombre
  - correction de la manière dont Symfony utilise les fichiers view.yml (important en particulier pour les exports vers des logiciels tableurs, type MSExcel)
- améliorations
  - activation de l'option "se souvenir de moi" lors de l'authentification
- nouveautés
  - ajout de deux fichiers de configuration globaux : config/e-venement.yml (non personnalisable) et config/project.yml (qui reprend les variables globales d'e-venement, comme le numéro de version)
  - support d'IPv6 et ajout d'un logo "IPv6 compliant" pour les serveurs supportant l'IPv6

== v2.1 -> v2.2 ==

Billetterie :
- Possibilité d'importer l'historique des contacts depuis la v1.x
- Limitation de l'affichage des prix en fonction des manifestations choisies
- Pré-remplissage du champ "nom" lorsqu'on créé un contact depuis une opération
- Possibilité d'ajouter un logo sur les billets
- Importante amélioration de la vitesse de traitement des livre de vente et journal détaillé lorsqu'il s'agissait de traiter un nombre important de billets
- Meilleure ergonomie des opérations de billetterie quant aux quantités de billets : chaque quantité est modifiable numériquement "en ligne"
- Possibilité d'"abandonner" une opération de billetterie
- Possibilité d'annuler des billets plus simplement pour les billetteries non-dématérialisées, soit directement dans une opération de billetterie, soit par un formulaire spécifique dans Billetterie > Annulation
- Possibilité (illégale selon le CGI Français) d'imprimer des billets groupés (si l'option est activée)
- Renforcement de la procédure d'import de billetteries externes (Ticketnet et La Fnac par exemple)
- Calcul plus strict des arrondis sur la TVA
- Possibilité de filtrer les dettes, duplicatas, factures, bons de commande, ...
- Affichage du montant de la dette dans la liste des dettes (!!)
- L'impression d'un grand nombre de billets a été profondément optimisée
- Ajout d'un journal de billet, sorte de fiche d'identité / historique d'un billet
- Affichage des billets, lors d'une opération de paiement simple, comme lors de l'annulation de billets
- La numérotation des factures est maintenant indépendante de la numérotation des bons de commande, ce qui permet d'avoir des numéros qui se suivent
- Améliorations de contrôles de permissions

Événementiel :
- Amélioration sensible de la vitesse d'affichage des manifestations et de leurs bilans lorsqu'elles contiennent un grand nombre de billets
- L'ordonnancement dans la liste des événements se paramètre maintenant soit du plus vieux au plus récent (date de leurs manifestations) soit l'inverse
- Possibilité d'extraire en CSV la liste des spectateurs d'une manifestation, possibilité d'exporter la liste dans un groupe
- Le placement numéroté est maintenant associé aux jauges, et non plus aux manifestations, permettant d'avoir une manifestation avec, par exemple, un parterre en placement libre, et un gradin numéroté
- Il est dorénavant possible d'ordonnancer utilisateur par utilisateur la liste des meta-événements, en particulier pour facilité les opérations en billetterie
- Ajout d'une fonctionnalité de transfert de jauges

Relations aux publics :
- Cartes de membre : améliorations graphiques et ergonomiques
- Cartes de membre : ajout de la possibilité d'avoir des places prépayées et différents modes d'interaction avec la billetterie, y compris un "solde" par carte, liés à des paiements en billetterie
- Correction de bugs sur les exports des contacts
- Possibilité d'ajouter des organismes à des groupes
- Ajout de pièces-jointes aux emailings
- Amélioration des contrôles de permissions

Statistiques :
- Ajout de statistiques sur les cartes de membre
- L'affichage des demandes est maintenant optionnel

Général :
- Amélioration du support de la traduction, en particulier sur des éléments récurrents comme les filtres, et des calendriers dynamiques
- Recherches en full-text : amélioration du support des caractères accentués, et des mots communs en anglais (!?)
- Meilleur support de CSS3 et des version récentes de Mozilla Firefox (> 11)
- Améliorations des impressions sur papier de différents écrans

Scolaires et groupes :
- Amélioration générale et conséquente du module, considérable comme valide pour des environnements de production

API de vente en ligne :
- Possibilité de forcer la "casse" sur les coordonnées des contacts remplies par les internautes
